start:                               # Start plane name
  position: -7                       # Plane position [m]  
  type: image                        # Type of plane (image = does nothing but output a diag at this plane)  
  
beam_shaper:                         # Beam shaper object : shapes the initial probe beam
  position: -6                       # Plane position [m]  
  type: aperture                     # Type of plane (aperture = blocks some part of the beam with a given profile)
  shape: gaussian                    # Gaussian shape (with maximum transmission at the center)
  invert: 0                          # Inversion (if =1 the minimum transmission is at the center)
  power: 20                          # Super-Gaussian power. >6 is very close to a flat-top beam. 1 = gaussian shape
  size: 0.0002                       # FWHM size (in intensity) in [m]
  

L1:                                  # Lens 1
  in: 1                              # If = 1 the object is applied. If = 0 it is bypassed
  position: -4                       # Plane position [m]
  type: lens                         # Type of plane (lens = ideal parabollic shaped lens with no defects)
  num_lenses: 1                      # Number of stacked lenses (can be >1 in the case of CRLs)
  f: 4.0                             # Focal length in [m]
  size: 0.002                        # Aperture (diameter) size [m]
  seiboth: false                     # Low frequency defects map 
  celestre: false                    # High frequency defects map 
  scatterer: false                   # Ball structures for defect modelling
  
TCC:                                 # Interaction plane between pump and probe. It must be defined at z = 0
  type: imager                       # Type of plane (imager = does nothing but output a diag at this plane)
  position: 0                        # Plane position [m] : TCC must always be defined at z = 0
  VB_signal: 1                       # Vacuum Birefringence signal calculator. Spawns two (perp and parallel) channels at TCC and bundle them with the initial probe field.
  
Det:                                 # Detector plane where the total number of photons in a given detector area are indicated
  position: 4.0                      # Plane position [m]
  type: imager                       # Type of plane (imager = does nothing but output a diag at this plane)
  roi: 13                            # Region of Interest : square area in [um] corresponding to the detector pixel size. The integrated signal will be calculated for this area.
  roi2: 75                           # Possibility to define a second area size to compare with the first one.
  
Xbeam:                               # Probe beam properties. In this case a X-ray beam, but can be any frequency.
  offset: 0                          # Offset of the beam at the 'start' plane, in [m]
  size: 0.002                        # Beam size (FWHM of intensity) at the start plane, in [m]
  photonenergy: 12914                # Photon energy of the probe beam, in eV
  photons_total: 2e11                # Total number of photons in the beam defined at the beam_shaper plane.
  X_FWHM_duration: 25e-15            # Probe FWHM duration [s] (assuming a Gaussian pulsed beam).
  
IRLaser:                             # Pump beam properties. In this case the pump beam is an IR laser.
  phi_VB_deg: 45                     # Polarisation angle between the pump and the probe beam
  IR_Energy_J: 4.8                   # Total energy of the pulse, at TCC, in [J]
  IR_FWHM_duration: 30e-15           # Pump FWHM duration [s], (assuming a Gaussian pulsed beam).
  IR_wavelength: 800e-9              # Pump central wavelength [m]
  IR_FWHM_gaussian: 1.3e-6           # Pump FWHM diameter (in intensity), in [m]
  IR_x_offset_m: 0                   # Pump offset in horizontal direction at the focus, in [m]
  IR_y_offset_m: 0                   # Pump offset in vertical direction at the focus, in [m]
  Timing_jitter: 0.0                 # Timing mismatch at focus between the pump and the probe, in [s].
  IR_2Dmap:
  - "gaussian"                       # "external" or "gaussian". Choose between using an external 2D image or a Gaussian shape for the pump focus.
  - "match_integral"                 # "match_integral" or "match_peak" to match the integral of the signal (such that the IR_Energy_J is matched) or the peak value of intensity for a Gaussian calculation.
  - "/home/yu79deg/VIBE/src/vibe/IR_focus.png"       # Path of the external IR focus image
  - 0                                # Calibration in Î¼m/pixel of the external image. If equal to = 0, the code will match the FWHM of external map laser to be equal to IR_FWHM_gaussian.


simulation:                          # General simulation parameters
  save_fig_and_pickle: 1             # 1 : All figures and pickles are saved (can be heavy). 0 : Only the important figures (flow_plot) and a light "summary.npz" are saved.
  save_individual_figures: 1         # 1 : Saving the individual figures in /VIBE/VIBE_outputs/planes (can be a bit heavy if the resolution is high). 0 : not saving individual figures.
  intensity_units: photons           # 'photons' or 'relative'. Unit of the intensity displayed. For 'photons' the code makes sure that "photons_total" photons are at the beam_shaper plane. For 'relative', the first plane intensity maximum will be set to unity.
  beamdiv: 0.0001                    # Initial beam divergence in [rad]
  name: as_filename                  # Simulation name (used for Pickles and figures). If = "as_filename" it will take the same name as the yaml input file.
  pptype: N                          # Simulation resolution type
  propsize: 0.0015                   # Total simulation grid size in [m].
  Zoom_global: 2                     # Zoom of diagnostics. For example, a zoom = 2 mean that the simulation box size displayed on figures will go from -propsize/4 to + propsize/4.
  subfigure_size_px: 0               # Pixel resolution used for saved subfigures. 0 : Use the full simulation resolution. >0 downsample figures to at most that many pixels per axis.  
  intensity_ylim:                    # Intensity ylim for "/figures/...summary"
  - 1.0e-10
  - 2.0
  profiles_xlim:                     # Intensity xlim for "/figures/...summary"
  - 0
  - 200
  figs_to_save:                      # List of the Planes to save. The name should match the plane name. If including "flow" the simulation will save a lot of plane to create the "flow_plot".
  - beam_shaper
  - TCC
  - Det
  - flow
  figs_log: 1                        # Log scale for most of the figures
  edge_damping:                      # Boundary condition : to avoid artefacts, the field is damped at the edge with a sinus function. Edge damping sets the relative size of damping compared to simulation box. 0.25 corresponds to a damping from +-propsize to +-propsize/2.
  - 0.25
  edge_damping_shape: circular       # Shape of the edge damping. "circular" uses a sinus function for damping.
  flow:                              # Parameters of the flow plots saved. Flow planes are saved in this example from -4.2 meter, to +4.2 meter, every 0.01 meter.
  - -4.2
  - 4.2
  - 0.01
  flow_auto_save: 0                 # 0 : Not saving individual figures for each flow plane. 1 : Saving all individual figures for each flow plane (heavy).
  flow_plot_gyax:                   # ylim parameters of the final flow_plot. In this example, the flow plot goes from  -650.0 um, to  650.0 um with a resolution of 1 um.
  - -650.0
  - 650.0
  - 1.0
  flow_plot_clim:                   # flow_plot colorbar limits. Defined in relative intensity.
  - 1e-11
  - 50
